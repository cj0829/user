UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor={plugins:{},commands:{},instants:{},I18N:{},_customizeUI:{},version:"1.5.0"};var dom=UE.dom={};var browser=UE.browser=function(){var d=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/i.test(d),opera:(!!b&&b.version),webkit:(d.indexOf(" applewebkit/")>-1),mac:(d.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};c.gecko=(navigator.product=="Gecko"&&!c.webkit&&!c.opera&&!c.ie);var a=0;if(c.ie){var g=d.match(/(?:msie\s([\w.]+))/);var f=d.match(/(?:trident.*rv:([\w.]+))/);if(g&&f&&g[1]&&f[1]){a=Math.max(g[1]*1,f[1]*1)}else{if(g&&g[1]){a=g[1]*1}else{if(f&&f[1]){a=f[1]*1}else{a=0}}}c.ie11Compat=document.documentMode==11;c.ie9Compat=document.documentMode==9;c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=((a==7&&!document.documentMode)||document.documentMode==7);c.ie6Compat=(a<7||c.quirks);c.ie9above=a>8;c.ie9below=a<9;c.ie11above=a>10;c.ie11below=a<11}if(c.gecko){var e=d.match(/rv:([\d\.]+)/);if(e){e=e[1].split(".");a=e[0]*10000+(e[1]||0)*100+(e[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(d)){c.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(d)&&!/chrome/i.test(d)){c.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(c.opera){a=parseFloat(b.version())}if(c.webkit){a=parseFloat(d.match(/ applewebkit\/(\d+)/)[1])}c.version=a;c.isCompatible=!c.mobile&&((c.ie&&a>=6)||(c.gecko&&a>=10801)||(c.opera&&a>=9.5)||(c.air&&a>=1)||(c.webkit&&a>=522)||false);return c}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={each:function(f,e,d){if(f==null){return}if(f.length===+f.length){for(var c=0,a=f.length;c<a;c++){if(e.call(d,f[c],c,f)===false){return false}}}else{for(var b in f){if(f.hasOwnProperty(b)){if(e.call(d,f[b],b,f)===false){return false}}}}},makeInstance:function(b){var a=new Function();a.prototype=b;b=new a;a.prototype=null;return b},extend:function(d,e,a){if(e){for(var c in e){if(!a||!d.hasOwnProperty(c)){d[c]=e[c]}}}return d},extend2:function(f){var c=arguments;for(var e=1;e<c.length;e++){var b=c[e];for(var d in b){if(!f.hasOwnProperty(d)){f[d]=b[d]}}}return f},inherits:function(d,b){var a=d.prototype,c=utils.makeInstance(b.prototype);utils.extend(c,a,true);d.prototype=c;return(c.constructor=d)},bind:function(b,a){return function(){return b.apply(a,arguments)}},defer:function(b,a,c){var d;return function(){if(c){clearTimeout(d)}d=setTimeout(b,a)}},indexOf:function(d,b,c){var a=-1;c=this.isNumber(c)?c:0;this.each(d,function(e,f){if(f>=c&&e===b){a=f;return false}});return a},removeItem:function(d,c){for(var b=0,a=d.length;b<a;b++){if(d[b]===c){d.splice(b,1);b--}}},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(c){if(!c){return{}}c=utils.isArray(c)?c:c.split(",");for(var b=0,a,d={};a=c[b++];){d[a.toUpperCase()]=d[a]=1}return d},unhtml:function(b,a){return b?b.replace(a||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(d,c){if(c){return d}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[d]}}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(b){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[b]}):""},cssStyleToDomStyle:function(){var b=document.createElement("div").style,a={"float":b.cssFloat!=undefined?"cssFloat":b.styleFloat!=undefined?"styleFloat":"float"};return function(c){return a[c]||(a[c]=c.toLowerCase().replace(/-./g,function(d){return d.charAt(1).toUpperCase()}))}}(),loadFile:function(){var a=[];function b(h,g){try{for(var d=0,c;c=a[d++];){if(c.doc===h&&c.url==(g.src||g.href)){return c}}}catch(f){return null}}return function(i,h,e){var f=b(i,h);if(f){if(f.ready){e&&e()}else{f.funs.push(e)}return}a.push({doc:i,url:h.src||h.href,funs:[e]});if(!i.body){var d=[];for(var g in h){if(g=="tag"){continue}d.push(g+'="'+h[g]+'"')}i.write("<"+h.tag+" "+d.join(" ")+" ></"+h.tag+">");return}if(h.id&&i.getElementById(h.id)){return}var c=i.createElement(h.tag);delete h.tag;for(var g in h){c.setAttribute(g,h[g])}c.onload=c.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){f=b(i,h);if(f.funs.length>0){f.ready=1;for(var j;j=f.funs.pop();){j()}}c.onload=c.onreadystatechange=null}};c.onerror=function(){throw Error("The load "+(h.href||h.src)+" fails,check the url settings of file ueditor.config.js ")};i.getElementsByTagName("head")[0].appendChild(c)}}(),isEmptyObject:function(b){if(b==null){return true}if(this.isArray(b)||this.isString(b)){return b.length===0}for(var a in b){if(b.hasOwnProperty(a)){return false}}return true},fixColor:function(b,d){if(/color/i.test(b)&&/rgba?/.test(d)){var e=d.split(",");if(e.length>3){return""}d="#";for(var c=0,a;a=e[c++];){a=parseInt(a.replace(/[^\d]/gi,""),10).toString(16);d+=a.length==1?"0"+a:a}d=d.toUpperCase()}return d},optCss:function(e){var d,c,a;e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(i,g,f,h){if(h.split(" ").length==1){switch(g){case"padding":!d&&(d={});d[f]=h;return"";case"margin":!c&&(c={});c[f]=h;return"";case"border":return h=="initial"?"":i}}return i});function b(m,h){if(!m){return""}var i=m.top,f=m.bottom,g=m.left,j=m.right,n="";if(!i||!g||!f||!j){for(var k in m){n+=";"+h+"-"+k+":"+m[k]+";"}}else{n+=";"+h+":"+(i==f&&f==g&&g==j?i:i==f&&g==j?(i+" "+g):g==j?(i+" "+g+" "+f):(i+" "+j+" "+f+" "+g))+";"}return n}e+=b(d,"padding")+b(c,"margin");return e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(g,f){return f?f+";;":";"})},clone:function(c,d){var b;d=d||{};for(var a in c){if(c.hasOwnProperty(a)){b=c[a];if(typeof b=="object"){d[a]=utils.isArray(b)?[]:{};utils.clone(c[a],d[a])}else{d[a]=b}}}return d},transUnitToPx:function(b){if(!/(pt|cm)/.test(b)){return b}var a;b.replace(/([\d.]+)(\w+)/,function(e,c,d){b=c;a=d});switch(a){case"cm":b=parseFloat(b)*25;break;case"pt":b=Math.round(parseFloat(b)*96/72)}return b+(b?"px":"")},domReady:function(){var a=[];function b(d){d.isReady=true;for(var c;c=a.pop();c()){}}return function(c,e){e=e||window;var d=e.document;c&&a.push(c);if(d.readyState==="complete"){b(d)}else{d.isReady&&b(d);if(browser.ie&&browser.version!=11){(function(){if(d.isReady){return}try{d.documentElement.doScroll("left")}catch(f){setTimeout(arguments.callee,0);return}b(d)})();e.attachEvent("onload",function(){b(d)})}else{d.addEventListener("DOMContentLoaded",function(){d.removeEventListener("DOMContentLoaded",arguments.callee,false);b(d)},false);e.addEventListener("load",function(){b(d)},false)}}}}(),cssRule:browser.ie&&browser.version!=11?function(c,d,e){var a,b;if(d===undefined||d&&d.nodeType&&d.nodeType==9){e=d&&d.nodeType&&d.nodeType==9?d:(e||document);a=e.indexList||(e.indexList={});b=a[c];if(b!==undefined){return e.styleSheets[b].cssText}return undefined}e=e||document;a=e.indexList||(e.indexList={});b=a[c];if(d===""){if(b!==undefined){e.styleSheets[b].cssText="";delete a[c];return true}return false}if(b!==undefined){sheetStyle=e.styleSheets[b]}else{sheetStyle=e.createStyleSheet("",b=e.styleSheets.length);a[c]=b}sheetStyle.cssText=d}:function(b,c,e){var a,d;if(c===undefined||c&&c.nodeType&&c.nodeType==9){e=c&&c.nodeType&&c.nodeType==9?c:(e||document);d=e.getElementById(b);return d?d.innerHTML:undefined}e=e||document;d=e.getElementById(b);if(c===""){if(d){d.parentNode.removeChild(d);return true}return false}if(d){d.innerHTML=c}else{d=e.createElement("style");d.id=b;d.innerHTML=c;e.getElementsByTagName("head")[0].appendChild(d)}},sort:function(g,f){f=f||function(i,h){return i.localeCompare(h)};for(var d=0,a=g.length;d<a;d++){for(var b=d,e=g.length;b<e;b++){if(f(g[d],g[b])>0){var c=g[d];g[d]=g[b];g[b]=c}}}return g},serializeParam:function(c){var d=[];for(var b in c){if(b=="method"||b=="timeout"||b=="async"){continue}if(!((typeof c[b]).toLowerCase()=="function"||(typeof c[b]).toLowerCase()=="object")){d.push(encodeURIComponent(b)+"="+encodeURIComponent(c[b]))}else{if(utils.isArray(c[b])){for(var a=0;a<c[b].length;a++){d.push(encodeURIComponent(b)+"[]="+encodeURIComponent(c[b][a]))}}}}return d.join("&")},formatUrl:function(b){var a=b.replace(/&&/g,"&");a=a.replace(/\?&/g,"?");a=a.replace(/&$/g,"");a=a.replace(/&#/g,"#");a=a.replace(/&+/g,"&");return a},isCrossDomainUrl:function(c){var b=document.createElement("a");b.href=c;if(browser.ie){b.href=b.href}return !(b.protocol==location.protocol&&b.hostname==location.hostname&&(b.port==location.port||(b.port=="80"&&location.port=="")||(b.port==""&&location.port=="80")))},clearEmptyAttrs:function(b){for(var a in b){if(b[a]===""){delete b[a]}}return b},str2json:function(a){if(!utils.isString(a)){return null}if(window.JSON){return JSON.parse(a)}else{return(new Function("return "+utils.trim(a||"")))()}},json2str:(function(){if(window.JSON){return JSON.stringify}else{var b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(f){if(/["\\\x00-\x1f]/.test(f)){f=f.replace(/["\\\x00-\x1f]/g,function(g){var h=b[g];if(h){return h}h=g.charCodeAt();return"\\u00"+Math.floor(h/16).toString(16)+(h%16).toString(16)})}return'"'+f+'"'}function d(m){var g=["["],h=m.length,f,j,k;for(j=0;j<h;j++){k=m[j];switch(typeof k){case"undefined":case"function":case"unknown":break;default:if(f){g.push(",")}g.push(utils.json2str(k));f=1}}g.push("]");return g.join("")}function c(f){return f<10?"0"+f:f}function e(f){return'"'+f.getFullYear()+"-"+c(f.getMonth()+1)+"-"+c(f.getDate())+"T"+c(f.getHours())+":"+c(f.getMinutes())+":"+c(f.getSeconds())+'"'}return function(k){switch(typeof k){case"undefined":return"undefined";case"number":return isFinite(k)?String(k):"null";case"string":return a(k);case"boolean":return String(k);default:if(k===null){return"null"}else{if(utils.isArray(k)){return d(k)}else{if(utils.isDate(k)){return e(k)}else{var g=["{"],j=utils.json2str,f,i;for(var h in k){if(Object.prototype.hasOwnProperty.call(k,h)){i=k[h];switch(typeof i){case"undefined":case"unknown":case"function":break;default:if(f){g.push(",")}f=1;g.push(j(h)+":"+j(i))}}}g.push("}");return g.join("")}}}}}}})()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(a){UE.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(b,d){b=utils.trim(b).split(/\s+/);for(var a=0,c;c=b[a++];){getListener(this,c,true).push(d)}},on:function(a,b){return this.addListener(a,b)},off:function(a,b){return this.removeListener(a,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(b,d){b=utils.trim(b).split(/\s+/);for(var a=0,c;c=b[a++];){utils.removeItem(getListener(this,c)||[],d)}},fireEvent:function(){var d=arguments[0];d=utils.trim(d).split(" ");for(var c=0,f;f=d[c++];){var e=getListener(this,f),g,b,a;if(e){a=e.length;while(a--){if(!e[a]){continue}b=e[a].apply(this,arguments);if(b===true){return b}if(b!==undefined){g=b}}}if(b=this["on"+f.toLowerCase()]){g=b.apply(this,arguments)}}return g}};function getListener(d,b,c){var a;b=b.toLowerCase();return((a=(d.__allListeners||c&&(d.__allListeners={})))&&(a[b]||c&&(a[b]=[])))}var dtd=dom.dtd=(function(){function z(B){for(var A in B){B[A.toUpperCase()]=B[A]}return B}var a=utils.extend2;var y=z({isindex:1,fieldset:1}),x=z({input:1,button:1,select:1,textarea:1,label:1}),w=a(z({a:1}),x),v=a({iframe:1},w),u=z({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),t=z({ins:1,del:1,script:1,style:1}),s=a(z({mark:1,b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),t),r=a(z({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),s),q=a(z({p:1}),r),p=a(z({iframe:1}),r,x),n=z({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),m=a(z({a:0}),p),k=z({tr:1}),j=z({"#":1}),i=a(z({param:1}),n),h=a(z({form:1}),y,v,u,q),g=z({li:1,ol:1,ul:1}),f=z({style:1,script:1}),e=z({base:1,link:1,meta:1,title:1}),d=a(e,f),c=z({head:1,body:1}),b=z({html:1});var l=z({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),o=z({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return z({$nonBodyContent:a(b,c,e),$block:l,$inline:m,$inlineWithA:a(z({a:1}),m),$body:a(z({script:1,style:1}),l),$cdata:z({script:1,style:1}),$empty:o,$nonChild:z({iframe:1,textarea:1}),$listItem:z({dd:1,dt:1,li:1}),$list:z({ul:1,ol:1,dl:1}),$isNotEmpty:z({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:z({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:z({p:1,div:1}),$tableContent:z({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:z({pre:1,script:1,style:1,textarea:1}),html:c,head:d,style:j,script:j,body:h,base:{},link:{},meta:{},title:j,col:{},tr:z({td:1,th:1}),img:{},embed:{},colgroup:z({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:h,td:h,br:{},th:h,center:h,kbd:m,button:a(q,u),basefont:{},h5:m,h4:m,samp:m,h6:m,ol:g,h1:m,h3:m,option:j,h2:m,form:a(y,v,u,q),select:z({optgroup:1,option:1}),font:m,ins:m,menu:g,abbr:m,label:m,table:z({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:m,tfoot:k,cite:m,li:h,input:{},iframe:h,strong:m,textarea:j,noframes:h,big:m,small:m,span:z({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:m,dt:m,sub:m,optgroup:z({option:1}),param:{},bdo:m,"var":m,div:h,object:i,sup:m,dd:h,strike:m,area:{},dir:g,map:a(z({area:1,form:1,p:1}),y,t,u),applet:i,dl:z({dt:1,dd:1}),del:m,isindex:{},fieldset:a(z({legend:1}),n),thead:k,ul:g,acronym:m,b:m,a:a(z({a:1}),p),blockquote:a(z({td:1,tr:1,tbody:1,li:1}),h),caption:m,i:m,u:m,tbody:k,s:m,address:a(v,q),tt:m,legend:m,q:m,pre:a(s,w),p:a(z({a:1}),m),em:m,dfn:m,mark:m})})();function getDomNode(g,h,b,a,e,f){var d=a&&g[h],c;!d&&(d=g[b]);while(!d&&(c=(c||g).parentNode)){if(c.tagName=="BODY"||f&&!f(c)){return null}d=c[b]}if(d&&e&&!e(d)){return getDomNode(d,h,b,false,e)}return d}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(f,d){if(f===d){return 0}var b,e=[f],c=[d];b=f;while(b=b.parentNode){if(b===d){return 10}e.push(b)}b=d;while(b=b.parentNode){if(b===f){return 20}c.push(b)}e.reverse();c.reverse();if(e[0]!==c[0]){return 1}var a=-1;while(a++,e[a]===c[a]){}f=e[a];d=c[a];while(f=f.nextSibling){if(f===d){return 4}}return 2},getNodeIndex:function(c,b){var d=c,a=0;while(d=d.previousSibling){if(b&&d.nodeType==3){if(d.nodeType!=d.nextSibling.nodeType){a++}continue}a++}return a},inDoc:function(a,b){return domUtils.getPosition(a,b)==10},findParent:function(b,c,a){if(b&&!domUtils.isBody(b)){b=a?b:b.parentNode;while(b){if(!c||c(b)||domUtils.isBody(b)){return c&&!c(b)&&domUtils.isBody(b)?null:b}b=b.parentNode}}return null},findParentByTagName:function(c,a,b,d){a=utils.listToMap(utils.isArray(a)?a:[a]);return domUtils.findParent(c,function(e){return a[e.tagName]&&!(d&&d(e))},b)},findParents:function(d,c,e,b){var a=c&&(e&&e(d)||!e)?[d]:[];while(d=domUtils.findParent(d,e)){a.push(d)}return b?a:a.reverse()},insertAfter:function(b,a){return b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a)},remove:function(b,c){var a=b.parentNode,d;if(a){if(c&&b.hasChildNodes()){while(d=b.firstChild){a.insertBefore(d,b)}}a.removeChild(b)}return b},getNextDomNode:function(c,a,d,b){return getDomNode(c,"firstChild","nextSibling",a,d,b)},getPreDomNode:function(c,a,d,b){return getDomNode(c,"lastChild","previousSibling",a,d,b)},isBookmarkNode:function(a){return a.nodeType==1&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(f,d){if(f===d){return f}var e=[f],c=[d],b=f,a=-1;while(b=b.parentNode){if(b===d){return b}e.push(b)}b=d;while(b=b.parentNode){if(b===f){return b}c.push(b)}e.reverse();c.reverse();while(a++,e[a]===c[a]){}return a==0?null:e[a-1]},clearEmptySibling:function(d,b,c){function a(g,e){var f;while(g&&!domUtils.isBookmarkNode(g)&&(domUtils.isEmptyInlineElement(g)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(g.nodeValue))){f=g[e];domUtils.remove(g);g=f}}!b&&a(d.nextSibling,"nextSibling");!c&&a(d.previousSibling,"previousSibling")},split:function(d,f){var e=d.ownerDocument;if(browser.ie&&f==d.nodeValue.length){var c=e.createTextNode("");return domUtils.insertAfter(d,c)}var a=d.splitText(f);if(browser.ie8){var b=e.createTextNode("");domUtils.insertAfter(a,b);domUtils.remove(b)}return a},isWhitespace:function(a){return !new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(a.nodeValue)},getXY:function(b){var a=0,c=0;while(b.offsetParent){c+=b.offsetTop;a+=b.offsetLeft;b=b.offsetParent}return{x:a,y:c}},on:function(e,g,f){var d=utils.isArray(g)?g:utils.trim(g).split(/\s+/),a=d.length;if(a){while(a--){g=d[a];if(e.addEventListener){e.addEventListener(g,f,false)}else{if(!f._d){f._d={els:[]}}var c=g+f.toString(),b=utils.indexOf(f._d.els,e);if(!f._d[c]||b==-1){if(b==-1){f._d.els.push(e)}if(!f._d[c]){f._d[c]=function(h){return f.call(h.srcElement,h||window.event)}}e.attachEvent("on"+g,f._d[c])}}}}e=null},un:function(f,h,g){var d=utils.isArray(h)?h:utils.trim(h).split(/\s+/),a=d.length;if(a){while(a--){h=d[a];if(f.removeEventListener){f.removeEventListener(h,g,false)}else{var c=h+g.toString();try{f.detachEvent("on"+h,g._d?g._d[c]:g)}catch(i){}if(g._d&&g._d[c]){var b=utils.indexOf(g._d.els,f);if(b!=-1){g._d.els.splice(b,1)}g._d.els.length==0&&delete g._d[c]}}}}},isSameElement:function(d,c){if(d.tagName!=c.tagName){return false}var e=d.attributes,g=c.attributes;if(!ie&&e.length!=g.length){return false}var a,j,h=0,b=0;for(var f=0;a=e[f++];){if(a.nodeName=="style"){if(a.specified){h++}if(domUtils.isSameStyle(d,c)){continue}else{return false}}if(ie){if(a.specified){h++;j=g.getNamedItem(a.nodeName)}else{continue}}else{j=c.attributes[a.nodeName]}if(!j.specified||a.nodeValue!=j.nodeValue){return false}}if(ie){for(f=0;j=g[f++];){if(j.specified){b++}}if(h!=b){return false}}return true},isSameStyle:function(g,e){var b=g.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),a=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){b=g.style;a=e.style;if(b.length!=a.length){return false}for(var f in b){if(/^(\d+|csstext)$/i.test(f)){continue}if(b[f]!=a[f]){return false}}return true}if(!b||!a){return b==a}b=b.split(";");a=a.split(";");if(b.length!=a.length){return false}for(var d=0,c;c=b[d++];){if(utils.indexOf(a,c)==-1){return false}}return true},isBlockElm:function(a){return a.nodeType==1&&(dtd.$block[a.tagName]||styleBlock[domUtils.getComputedStyle(a,"display")])&&!dtd.$nonChild[a.tagName]},isBody:function(a){return a&&a.nodeType==1&&a.tagName.toLowerCase()=="body"},breakParent:function(e,c){var b,g=e,f=e,a,d;do{g=g.parentNode;if(a){b=g.cloneNode(false);b.appendChild(a);a=b;b=g.cloneNode(false);b.appendChild(d);d=b}else{a=g.cloneNode(false);d=a.cloneNode(false)}while(b=f.previousSibling){a.insertBefore(b,a.firstChild)}while(b=f.nextSibling){d.appendChild(b)}f=g}while(c!==g);b=c.parentNode;b.insertBefore(a,c);b.insertBefore(d,c);b.insertBefore(e,d);domUtils.remove(c);return e},isEmptyInlineElement:function(a){if(a.nodeType!=1||!dtd.$removeEmpty[a.tagName]){return 0}a=a.firstChild;while(a){if(domUtils.isBookmarkNode(a)){return 0}if(a.nodeType==1&&!domUtils.isEmptyInlineElement(a)||a.nodeType==3&&!domUtils.isWhitespace(a)){return 0}a=a.nextSibling}return 1},trimWhiteTextNode:function(b){function a(c){var d;while((d=b[c])&&d.nodeType==3&&domUtils.isWhitespace(d)){b.removeChild(d)}}a("firstChild");a("lastChild")},mergeChild:function(c,b,g){var f=domUtils.getElementsByTagName(c,c.tagName.toLowerCase());for(var e=0,k;k=f[e++];){if(!k.parentNode||domUtils.isBookmarkNode(k)){continue}if(k.tagName.toLowerCase()=="span"){if(c===k.parentNode){domUtils.trimWhiteTextNode(c);if(c.childNodes.length==1){c.style.cssText=k.style.cssText+";"+c.style.cssText;domUtils.remove(k,true);continue}}k.style.cssText=c.style.cssText+";"+k.style.cssText;if(g){var a=g.style;if(a){a=a.split(";");for(var d=0,h;h=a[d++];){k.style[utils.cssStyleToDomStyle(h.split(":")[0])]=h.split(":")[1]}}}if(domUtils.isSameStyle(k,c)){domUtils.remove(k,true)}continue}if(domUtils.isSameElement(c,k)){domUtils.remove(k,true)}}},getElementsByTagName:function(e,a,b){if(b&&utils.isString(b)){var j=b;b=function(i){return domUtils.hasClass(i,j)}}a=utils.trim(a).replace(/[ ]{2,}/g," ").split(" ");var g=[];for(var d=0,c;c=a[d++];){var h=e.getElementsByTagName(c);for(var f=0,k;k=h[f++];){if(!b||b(k)){g.push(k)}}}return g},mergeToParent:function(b){var a=b.parentNode;while(a&&dtd.$removeEmpty[a.tagName]){if(a.tagName==b.tagName||a.tagName=="A"){domUtils.trimWhiteTextNode(a);if(a.tagName=="SPAN"&&!domUtils.isSameStyle(a,b)||(a.tagName=="A"&&b.tagName=="SPAN")){if(a.childNodes.length>1||a!==b.parentNode){b.style.cssText=a.style.cssText+";"+b.style.cssText;a=a.parentNode;continue}else{a.style.cssText+=";"+b.style.cssText;if(a.tagName=="A"){a.style.textDecoration="underline"}}}if(a.tagName!="A"){a===b.parentNode&&domUtils.remove(b,true);break}}a=a.parentNode}},mergeSibling:function(c,b,a){function d(g,h,f){var e;if((e=f[g])&&!domUtils.isBookmarkNode(e)&&e.nodeType==1&&domUtils.isSameElement(f,e)){while(e.firstChild){if(h=="firstChild"){f.insertBefore(e.lastChild,f.firstChild)}else{f.appendChild(e.firstChild)}}domUtils.remove(e)}}!b&&d("previousSibling","firstChild",c);!a&&d("nextSibling","lastChild",c)},unSelectable:ie&&browser.ie9below||browser.opera?function(c){c.onselectstart=function(){return false};c.onclick=c.onkeyup=c.onkeydown=function(){return false};c.unselectable="on";c.setAttribute("unselectable","on");for(var b=0,a;a=c.all[b++];){switch(a.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:a.unselectable="on";c.setAttribute("unselectable","on")}}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.msUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(c,e){e=utils.isArray(e)?e:utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");for(var b=0,a;a=e[b++];){a=attrFix[a]||a;switch(a){case"className":c[a]="";break;case"style":c.style.cssText="";var d=c.getAttributeNode("style");!browser.ie&&d&&c.removeAttributeNode(d)}c.removeAttribute(a)}},createElement:function(c,a,b){return domUtils.setAttributes(c.createElement(a),b)},setAttributes:function(c,b){for(var a in b){if(b.hasOwnProperty(a)){var d=b[a];switch(a){case"class":c.className=d;break;case"style":c.style.cssText=c.style.cssText+";"+d;break;case"innerHTML":c[a]=d;break;case"value":c.value=d;break;default:c.setAttribute(attrFix[a]||a,d)}}}return c},getComputedStyle:function(c,b){var g="width height top left";if(g.indexOf(b)>-1){return c["offset"+b.replace(/^\w/,function(e){return e.toUpperCase()})]+"px"}if(c.nodeType==3){c=c.parentNode}if(browser.ie&&browser.version<9&&b=="font-size"&&!c.style.fontSize&&!dtd.$empty[c.tagName]&&!dtd.$nonChild[c.tagName]){var d=c.ownerDocument.createElement("span");d.style.cssText="padding:0;border:0;font-family:simsun;";d.innerHTML=".";c.appendChild(d);var a=d.offsetHeight;c.removeChild(d);d=null;return a+"px"}try{var f=domUtils.getStyle(c,b)||(window.getComputedStyle?domUtils.getWindow(c).getComputedStyle(c,"").getPropertyValue(b):(c.currentStyle||c.style)[utils.cssStyleToDomStyle(b)])}catch(h){return""}return utils.transUnitToPx(utils.fixColor(b,f))},removeClasses:function(e,d){d=utils.isArray(d)?d:utils.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=e.className;b=d[c++];){a=a.replace(new RegExp("\\b"+b+"\\b"),"")}a=utils.trim(a).replace(/[ ]{2,}/g," ");if(a){e.className=a}else{domUtils.removeAttributes(e,["class"])}},addClass:function(e,d){if(!e){return}d=utils.trim(d).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=e.className;b=d[c++];){if(!new RegExp("\\b"+b+"\\b").test(a)){a+=" "+b}}e.className=utils.trim(a)},hasClass:function(d,e){if(utils.isRegExp(e)){return e.test(d.className)}e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,b,a=d.className;b=e[c++];){if(!new RegExp("\\b"+b+"\\b","i").test(a)){return false}}return c-1==e.length},preventDefault:function(a){a.preventDefault?a.preventDefault():(a.returnValue=false)},removeStyle:function(b,a){if(browser.ie){if(a=="color"){a="(^|;)"+a}b.style.cssText=b.style.cssText.replace(new RegExp(a+"[^:]*:[^;]+;?","ig"),"")}else{if(b.style.removeProperty){b.style.removeProperty(a)}else{b.style.removeAttribute(utils.cssStyleToDomStyle(a))}}if(!b.style.cssText){domUtils.removeAttributes(b,["style"])}},getStyle:function(b,a){var c=b.style[utils.cssStyleToDomStyle(a)];return utils.fixColor(a,c)},setStyle:function(b,a,c){b.style[utils.cssStyleToDomStyle(a)]=c;if(!utils.trim(b.style.cssText)){this.removeAttributes(b,"style")}},setStyles:function(b,c){for(var a in c){if(c.hasOwnProperty(a)){domUtils.setStyle(b,a,c[a])}}},removeDirtyAttr:function(d){for(var c=0,b,a=d.getElementsByTagName("*");b=a[c++];){b.removeAttribute("_moz_dirty")}d.removeAttribute("_moz_dirty")},getChildCount:function(c,a){var b=0,d=c.firstChild;a=a||function(){return 1};while(d){if(a(d)){b++}d=d.nextSibling}return b},isEmptyNode:function(a){return !a.firstChild||domUtils.getChildCount(a,function(b){return !domUtils.isBr(b)&&!domUtils.isBookmarkNode(b)&&!domUtils.isWhitespace(b)})==0},clearSelectedArr:function(a){var b;while(b=a.pop()){domUtils.removeAttributes(b,["class"])}},scrollToView:function(c,i,a){var b=function(){var j=i.document,k=j.compatMode=="CSS1Compat";return{width:(k?j.documentElement.clientWidth:j.body.clientWidth)||0,height:(k?j.documentElement.clientHeight:j.body.clientHeight)||0}},h=function(k){if("pageXOffset" in k){return{x:k.pageXOffset||0,y:k.pageYOffset||0}}else{var j=k.document;return{x:j.documentElement.scrollLeft||j.body.scrollLeft||0,y:j.documentElement.scrollTop||j.body.scrollTop||0}}};var f=b().height,g=f*-1+a;g+=(c.offsetHeight||0);var d=domUtils.getXY(c);g+=d.y;var e=h(i).y;if(g>e||g<e-f){i.scrollTo(0,g+(g<0?-20:20))}},isBr:function(a){return a.nodeType==1&&a.tagName=="BR"},isFillChar:function(a,c){if(a.nodeType!=3){return false}var b=a.nodeValue;if(c){return new RegExp("^"+domUtils.fillChar).test(b)}return !b.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(b){var f=b.cloneRange(),a=0,g=f.startContainer,c;if(g.nodeType==1&&g.childNodes[f.startOffset]){g=g.childNodes[f.startOffset];var e=g.previousSibling;while(e&&domUtils.isFillChar(e)){g=e;e=e.previousSibling}}if(this.isFillChar(g,true)&&f.startOffset==1){f.setStartBefore(g);g=f.startContainer}while(g&&domUtils.isFillChar(g)){c=g;g=g.previousSibling}if(c){f.setStartBefore(c);g=f.startContainer}if(g.nodeType==1&&domUtils.isEmptyNode(g)&&f.startOffset==1){f.setStart(g,0).collapse(true)}while(!f.startOffset){g=f.startContainer;if(domUtils.isBlockElm(g)||domUtils.isBody(g)){a=1;break}var e=f.startContainer.previousSibling,d;if(!e){f.setStartBefore(f.startContainer)}else{while(e&&domUtils.isFillChar(e)){d=e;e=e.previousSibling}if(d){f.setStartBefore(d)}else{f.setStartBefore(f.startContainer)}}}return a&&!domUtils.isBody(f.startContainer)?1:0},isEmptyBlock:function(b,a){if(b.nodeType!=1){return 0}a=a||new RegExp("[ \xa0\t\r\n"+domUtils.fillChar+"]","g");if(b[browser.ie?"innerText":"textContent"].replace(a,"").length>0){return 0}for(var c in dtd.$isNotEmpty){if(b.getElementsByTagName(c).length){return 0}}return 1},setViewportOffset:function(a,g){var f=parseInt(a.style.left)|0;var e=parseInt(a.style.top)|0;var c=a.getBoundingClientRect();var d=g.left-c.left;var b=g.top-c.top;if(d){a.style.left=f+d+"px"}if(b){a.style.top=e+b+"px"}},fillNode:function(c,b){var a=browser.ie?c.createTextNode(domUtils.fillChar):c.createElement("br");b.innerHTML="";b.appendChild(a)},moveChild:function(c,a,b){while(c.firstChild){if(b&&a.firstChild){a.insertBefore(c.lastChild,a.firstChild)}else{a.appendChild(c.firstChild)}}},hasNoAttributes:function(a){return browser.ie?/^<\w+\s*?>/.test(a.outerHTML):a.attributes.length==0},isCustomeNode:function(a){return a.nodeType==1&&a.getAttribute("_ue_custom_node_")},isTagNode:function(b,a){return b.nodeType==1&&new RegExp("\\b"+b.tagName+"\\b","i").test(a)},filterNodeList:function(d,c,b){var a=[];if(!utils.isFunction(c)){var e=c;c=function(f){return utils.indexOf(utils.isArray(e)?e:e.split(" "),f.tagName.toLowerCase())!=-1}}utils.each(d,function(f){c(f)&&a.push(f)});return a.length==0?null:a.length==1||!b?a[0]:a},isInNodeEndBoundary:function(a,b){var c=a.startContainer;if(c.nodeType==3&&a.startOffset!=c.nodeValue.length){return 0}if(c.nodeType==1&&a.startOffset!=c.childNodes.length){return 0}while(c!==b){if(c.nextSibling){return 0}c=c.parentNode}return 1},isBoundaryNode:function(c,a){var b;while(!domUtils.isBody(c)){b=c;c=c.parentNode;if(b!==c[a]){return false}}return true},fillHtml:browser.ie11below?"&nbsp;":"<br/>"};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var f=0,g=domUtils.fillChar,c;function b(k){k.collapsed=k.startContainer&&k.endContainer&&k.startContainer===k.endContainer&&k.startOffset==k.endOffset}function j(k){return !k.collapsed&&k.startContainer.nodeType==1&&k.startContainer===k.endContainer&&k.endOffset-k.startOffset==1}function a(l,m,n,k){if(m.nodeType==1&&(dtd.$empty[m.tagName]||dtd.$nonChild[m.tagName])){n=domUtils.getNodeIndex(m)+(l?0:1);m=m.parentNode}if(l){k.startContainer=m;k.startOffset=n;if(!k.endContainer){k.collapse(true)}}else{k.endContainer=m;k.endOffset=n;if(!k.startContainer){k.collapse(false)}}b(k);return k}function i(q,u){var o=q.startContainer,n=q.endContainer,w=q.startOffset,p=q.endOffset,C=q.document,k=C.createDocumentFragment(),r,t;if(o.nodeType==1){o=o.childNodes[w]||(r=o.appendChild(C.createTextNode("")))}if(n.nodeType==1){n=n.childNodes[p]||(t=n.appendChild(C.createTextNode("")))}if(o===n&&o.nodeType==3){k.appendChild(C.createTextNode(o.substringData(w,p-w)));if(u){o.deleteData(w,p-w);q.collapse(true)}return k}var s,y,A=k,z=domUtils.findParents(o,true),l=domUtils.findParents(n,true);for(var x=0;z[x]==l[x];){x++}for(var v=x,B;B=z[v];v++){s=B.nextSibling;if(B==o){if(!r){if(q.startContainer.nodeType==3){A.appendChild(C.createTextNode(o.nodeValue.slice(w)));if(u){o.deleteData(w,o.nodeValue.length-w)}}else{A.appendChild(!u?o.cloneNode(true):o)}}}else{y=B.cloneNode(false);A.appendChild(y)}while(s){if(s===n||s===l[v]){break}B=s.nextSibling;A.appendChild(!u?s.cloneNode(true):s);s=B}A=y}A=k;if(!z[x]){A.appendChild(z[x-1].cloneNode(false));A=A.firstChild}for(var v=x,m;m=l[v];v++){s=m.previousSibling;if(m==n){if(!t&&q.endContainer.nodeType==3){A.appendChild(C.createTextNode(n.substringData(0,p)));if(u){n.deleteData(0,p)}}}else{y=m.cloneNode(false);A.appendChild(y)}if(v!=x||!z[x]){while(s){if(s===o){break}m=s.previousSibling;A.insertBefore(!u?s.cloneNode(true):s,A.firstChild);s=m}}A=y}if(u){q.setStartBefore(!l[x]?l[x-1]:!z[x]?z[x-1]:l[x]).collapse(true)}r&&domUtils.remove(r);t&&domUtils.remove(t);return k}var d=dom.Range=function(k){var l=this;l.startContainer=l.startOffset=l.endContainer=l.endOffset=null;l.document=k;l.collapsed=true};function e(n,k){try{if(c&&domUtils.inDoc(c,n)){if(!c.nodeValue.replace(fillCharReg,"").length){var l=c.parentNode;domUtils.remove(c);while(l&&domUtils.isEmptyInlineElement(l)&&(browser.safari?!(domUtils.getPosition(l,k)&domUtils.POSITION_CONTAINS):!l.contains(k))){c=l.parentNode;domUtils.remove(l);l=c}}else{c.nodeValue=c.nodeValue.replace(fillCharReg,"")}}}catch(m){}}function h(m,k){var l;m=m[k];while(m&&domUtils.isFillChar(m)){l=m[k];domUtils.remove(m);m=l}}d.prototype={cloneContents:function(){return this.collapsed?null:i(this,0)},deleteContents:function(){var k;if(!this.collapsed){i(this,1)}if(browser.webkit){k=this.startContainer;if(k.nodeType==3&&!k.nodeValue.length){this.setStartBefore(k).collapse(true);domUtils.remove(k)}}return this},extractContents:function(){return this.collapsed?null:i(this,2)},setStart:function(k,l){return a(true,k,l,this)},setEnd:function(k,l){return a(false,k,l,this)},setStartAfter:function(k){return this.setStart(k.parentNode,domUtils.getNodeIndex(k)+1)},setStartBefore:function(k){return this.setStart(k.parentNode,domUtils.getNodeIndex(k))},setEndAfter:function(k){return this.setEnd(k.parentNode,domUtils.getNodeIndex(k)+1)},setEndBefore:function(k){return this.setEnd(k.parentNode,domUtils.getNodeIndex(k))},setStartAtFirst:function(k){return this.setStart(k,0)},setStartAtLast:function(k){return this.setStart(k,k.nodeType==3?k.nodeValue.length:k.childNodes.length)},setEndAtFirst:function(k){return this.setEnd(k,0)},setEndAtLast:function(k){return this.setEnd(k,k.nodeType==3?k.nodeValue.length:k.childNodes.length)},selectNode:function(k){return this.setStartBefore(k).setEndAfter(k)},selectNodeContents:function(k){return this.setStart(k,0).setEndAtLast(k)},cloneRange:function(){var k=this;return new d(k.document).setStart(k.startContainer,k.startOffset).setEnd(k.endContainer,k.endOffset)},collapse:function(k){var l=this;if(k){l.endContainer=l.startContainer;l.endOffset=l.startOffset}else{l.startContainer=l.endContainer;l.startOffset=l.endOffset}l.collapsed=true;return l},shrinkBoundary:function(m){var l=this,o,n=l.collapsed;function k(p){return p.nodeType==1&&!domUtils.isBookmarkNode(p)&&!dtd.$empty[p.tagName]&&!dtd.$nonChild[p.tagName]}while(l.startContainer.nodeType==1&&(o=l.startContainer.childNodes[l.startOffset])&&k(o)){l.setStart(o,0)}if(n){return l.collapse(true)}if(!m){while(l.endContainer.nodeType==1&&l.endOffset>0&&(o=l.endContainer.childNodes[l.endOffset-1])&&k(o)){l.setEnd(o,o.childNodes.length)}}return l},getCommonAncestor:function(l,m){var n=this,o=n.startContainer,k=n.endContainer;if(o===k){if(l&&j(this)){o=o.childNodes[n.startOffset];if(o.nodeType==1){return o}}return m&&o.nodeType==3?o.parentNode:o}return domUtils.getCommonAncestor(o,k)},trimBoundary:function(l){this.txtToElmBoundary();var p=this.startContainer,o=this.startOffset,n=this.collapsed,k=this.endContainer;if(p.nodeType==3){if(o==0){this.setStartBefore(p)}else{if(o>=p.nodeValue.length){this.setStartAfter(p)}else{var m=domUtils.split(p,o);if(p===k){this.setEnd(m,this.endOffset-o)}else{if(p.parentNode===k){this.endOffset+=1}}this.setStartBefore(m)}}if(n){return this.collapse(true)}}if(!l){o=this.endOffset;k=this.endContainer;if(k.nodeType==3){if(o==0){this.setEndBefore(k)}else{o<k.nodeValue.length&&domUtils.split(k,o);this.setEndAfter(k)}}}return this},txtToElmBoundary:function(k){function l(n,p){var m=n[p+"Container"],o=n[p+"Offset"];if(m.nodeType==3){if(!o){n["set"+p.replace(/(\w)/,function(q){return q.toUpperCase()})+"Before"](m)}else{if(o>=m.nodeValue.length){n["set"+p.replace(/(\w)/,function(q){return q.toUpperCase()})+"After"](m)}}}}if(k||!this.collapsed){l(this,"start");l(this,"end")}return this},insertNode:function(m){var o=m,l=1;if(m.nodeType==11){o=m.firstChild;l=m.childNodes.length}this.trimBoundary(true);var p=this.startContainer,n=this.startOffset;var k=p.childNodes[n];if(k){p.insertBefore(m,k)}else{p.appendChild(m)}if(o.parentNode===this.endContainer){this.endOffset=this.endOffset+l}return this.setStartBefore(o)},setCursor:function(l,k){return this.collapse(!l).select(k)},createBookmark:function(m,n){var k,l=this.document.createElement("span");l.style.cssText="display:none;line-height:0px;";l.appendChild(this.document.createTextNode("\u200D"));l.id="_baidu_bookmark_start_"+(n?"":f++);if(!this.collapsed){k=l.cloneNode(true);k.id="_baidu_bookmark_end_"+(n?"":f++)}this.insertNode(l);if(k){this.collapse().insertNode(k).setEndBefore(k)}this.setStartAfter(l);return{start:m?l.id:l,end:k?m?k.id:k:null,id:m}},moveToBookmark:function(l){var m=l.id?this.document.getElementById(l.start):l.start,k=l.end&&l.id?this.document.getElementById(l.end):l.end;this.setStartBefore(m);domUtils.remove(m);if(k){this.setEndBefore(k);domUtils.remove(k)}else{this.collapse(true)}return this},enlarge:function(l,o){var k=domUtils.isBody,p,n,m=this.document.createTextNode("");if(l){n=this.startContainer;if(n.nodeType==1){if(n.childNodes[this.startOffset]){p=n=n.childNodes[this.startOffset]}else{n.appendChild(m);p=n=m}}else{p=n}while(1){if(domUtils.isBlockElm(n)){n=p;while((p=n.previousSibling)&&!domUtils.isBlockElm(p)){n=p}this.setStartBefore(n);break}p=n;n=n.parentNode}n=this.endContainer;if(n.nodeType==1){if(p=n.childNodes[this.endOffset]){n.insertBefore(m,p)}else{n.appendChild(m)}p=n=m}else{p=n}while(1){if(domUtils.isBlockElm(n)){n=p;while((p=n.nextSibling)&&!domUtils.isBlockElm(p)){n=p}this.setEndAfter(n);break}p=n;n=n.parentNode}if(m.parentNode===this.endContainer){this.endOffset--}domUtils.remove(m)}if(!this.collapsed){while(this.startOffset==0){if(o&&o(this.startContainer)){break}if(k(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(o&&o(this.endContainer)){break}if(k(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(k){while(!domUtils.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!k){while(!domUtils.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(m,x,t){if(this.collapsed){return this}this.trimBoundary().enlarge(false,function(B){return B.nodeType==1&&domUtils.isBlockElm(B)}).adjustmentBoundary();var u=this.createBookmark(),p=u.end,z=function(B){return B.nodeType==1?B.tagName.toLowerCase()!="br":!domUtils.isWhitespace(B)},s=domUtils.getNextDomNode(u.start,false,z),n,o,r=this.cloneRange();while(s&&(domUtils.getPosition(s,p)&domUtils.POSITION_PRECEDING)){if(s.nodeType==3||dtd[m][s.tagName]){r.setStartBefore(s);n=s;while(n&&(n.nodeType==3||dtd[m][n.tagName])&&n!==p){o=n;n=domUtils.getNextDomNode(n,n.nodeType==1,null,function(B){return dtd[m][B.tagName]})}var y=r.setEndAfter(o).extractContents(),v;if(t&&t.length>0){var k,w;w=k=t[0].cloneNode(false);for(var q=1,A;A=t[q++];){k.appendChild(A.cloneNode(false));k=k.firstChild}v=k}else{v=r.document.createElement(m)}if(x){domUtils.setAttributes(v,x)}v.appendChild(y);if(v.tagName=="SPAN"&&x&&x.style){utils.each(v.getElementsByTagName("span"),function(B){B.style.cssText=B.style.cssText+";"+x.style})}r.insertNode(t?w:v);var l;if(m=="span"&&x.style&&/text\-decoration/.test(x.style)&&(l=domUtils.findParentByTagName(v,"a",true))){domUtils.setAttributes(l,x);domUtils.remove(v,true);v=l}else{domUtils.mergeSibling(v);domUtils.clearEmptySibling(v)}domUtils.mergeChild(v,x);s=domUtils.getNextDomNode(v,false,z);domUtils.mergeToParent(v);if(n===p){break}}else{s=domUtils.getNextDomNode(s,true,z)}}return this.moveToBookmark(u)},removeInlineStyle:function(k){if(this.collapsed){return this}k=utils.isArray(k)?k:[k];this.shrinkBoundary().adjustmentBoundary();var r=this.startContainer,l=this.endContainer;while(1){if(r.nodeType==1){if(utils.indexOf(k,r.tagName.toLowerCase())>-1){break}if(r.tagName.toLowerCase()=="body"){r=null;break}}r=r.parentNode}while(1){if(l.nodeType==1){if(utils.indexOf(k,l.tagName.toLowerCase())>-1){break}if(l.tagName.toLowerCase()=="body"){l=null;break}}l=l.parentNode}var n=this.createBookmark(),q,p;if(r){p=this.cloneRange().setEndBefore(n.start).setStartBefore(r);q=p.extractContents();p.insertNode(q);domUtils.clearEmptySibling(r,true);r.parentNode.insertBefore(n.start,r)}if(l){p=this.cloneRange().setStartAfter(n.end).setEndAfter(l);q=p.extractContents();p.insertNode(q);domUtils.clearEmptySibling(l,false,true);l.parentNode.insertBefore(n.end,l.nextSibling)}var o=domUtils.getNextDomNode(n.start,false,function(s){return s.nodeType==1}),m;while(o&&o!==n.end){m=domUtils.getNextDomNode(o,true,function(s){return s.nodeType==1});if(utils.indexOf(k,o.tagName.toLowerCase())>-1){domUtils.remove(o,true)}o=m}return this.moveToBookmark(n)},getClosedNode:function(){var l;if(!this.collapsed){var k=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(j(k)){var m=k.startContainer.childNodes[k.startOffset];if(m&&m.nodeType==1&&(dtd.$empty[m.tagName]||dtd.$nonChild[m.tagName])){l=m}}}return l},select:browser.ie?function(l,u){var q;if(!this.collapsed){this.shrinkBoundary()}var m=this.getClosedNode();if(m&&!u){try{q=this.document.body.createControlRange();q.addElement(m);q.select()}catch(r){}return this}var s=this.createBookmark(),k=s.start,n;q=this.document.body.createTextRange();q.moveToElementText(k);q.moveStart("character",1);if(!this.collapsed){var p=this.document.body.createTextRange();n=s.end;p.moveToElementText(n);q.setEndPoint("EndToEnd",p)}else{if(!l&&this.startContainer.nodeType!=3){var t=this.document.createTextNode(g),o=this.document.createElement("span");o.appendChild(this.document.createTextNode(g));k.parentNode.insertBefore(o,k);k.parentNode.insertBefore(t,k);e(this.document,t);c=t;h(o,"previousSibling");h(k,"nextSibling");q.moveStart("character",-1);q.collapse(true)}}this.moveToBookmark(s);o&&domUtils.remove(o);try{q.select()}catch(r){}return this}:function(k){function l(t){function s(v,w,u){if(v.nodeType==3&&v.nodeValue.length<w){t[u+"Offset"]=v.nodeValue.length}}s(t.startContainer,t.startOffset,"start");s(t.endContainer,t.endOffset,"end")}var p=domUtils.getWindow(this.document),o=p.getSelection(),n;browser.gecko?this.document.body.focus():p.focus();if(o){o.removeAllRanges();if(this.collapsed&&!k){var r=this.startContainer,q=r;if(r.nodeType==1){q=r.childNodes[this.startOffset]}if(!(r.nodeType==3&&this.startOffset)&&(q?(!q.previousSibling||q.previousSibling.nodeType!=3):(!r.lastChild||r.lastChild.nodeType!=3))){n=this.document.createTextNode(g);this.insertNode(n);e(this.document,n);h(n,"previousSibling");h(n,"nextSibling");c=n;this.setStart(n,browser.webkit?1:0).collapse(true)}}var m=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var q=this.startContainer.childNodes[this.startOffset];if(!q){q=this.startContainer.lastChild;if(q&&domUtils.isBr(q)){this.setStartBefore(q).collapse(true)}}else{while(q&&domUtils.isBlockElm(q)){if(q.nodeType==1&&q.childNodes[0]){q=q.childNodes[0]}else{break}}q&&this.setStartBefore(q).collapse(true)}}l(this);m.setStart(this.startContainer,this.startOffset);m.setEnd(this.endContainer,this.endOffset);o.addRange(m)}return this},scrollToView:function(m,n){m=m?window:domUtils.getWindow(this.document);var l=this,k=l.document.createElement("span");k.innerHTML="&nbsp;";l.cloneRange().insertNode(k);domUtils.scrollToView(k,m,n);domUtils.remove(k);return l},inFillChar:function(){var k=this.startContainer;if(this.collapsed&&k.nodeType==3&&k.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==k.nodeValue.length){return true}return false},createAddress:function(n,m){var o={},l=this;function k(p){var r=p?l.startContainer:l.endContainer;var w=domUtils.findParents(r,true,function(y){return !domUtils.isBody(y)}),v=[];for(var t=0,x;x=w[t++];){v.push(domUtils.getNodeIndex(x,m))}var q=0;if(m){if(r.nodeType==3){var s=r.previousSibling;while(s&&s.nodeType==3){q+=s.nodeValue.replace(fillCharReg,"").length;s=s.previousSibling}q+=(p?l.startOffset:l.endOffset)}else{r=r.childNodes[p?l.startOffset:l.endOffset];if(r){q=domUtils.getNodeIndex(r,m)}else{r=p?l.startContainer:l.endContainer;var u=r.firstChild;while(u){if(domUtils.isFillChar(u)){u=u.nextSibling;continue}q++;if(u.nodeType==3){while(u&&u.nodeType==3){u=u.nextSibling}}else{u=u.nextSibling}}}}}else{q=p?domUtils.isFillChar(r)?0:l.startOffset:l.endOffset}if(q<0){q=0}v.push(q);return v}o.startAddress=k(true);if(!n){o.endAddress=l.collapsed?[].concat(o.startAddress):k()}return o},moveToAddress:function(n,l){var k=this;function m(r,q){var u=k.document.body,o,v;for(var t=0,s,p=r.length;t<p;t++){s=r[t];o=u;u=u.childNodes[s];if(!u){v=s;break}}if(q){if(u){k.setStartBefore(u)}else{k.setStart(o,v)}}else{if(u){k.setEndBefore(u)}else{k.setEnd(o,v)}}}m(n.startAddress,true);!l&&n.endAddress&&m(n.endAddress);return k},equals:function(k){for(var l in this){if(this.hasOwnProperty(l)){if(this[l]!==k[l]){return false}}}return true},traversal:function(k,p){if(this.collapsed){return this}var n=this.createBookmark(),l=n.end,o=domUtils.getNextDomNode(n.start,false,p);while(o&&o!==l&&(domUtils.getPosition(o,l)&domUtils.POSITION_PRECEDING)){var m=domUtils.getNextDomNode(o,false,p);k(o);o=m}return this.moveToBookmark(n)}}})();(function(){function d(p,g){var h=domUtils.getNodeIndex;p=p.duplicate();p.collapse(g);var t=p.parentElement();if(!t.hasChildNodes()){return{container:t,offset:0}}var s=t.children,j,l=p.duplicate(),u=0,o=s.length-1,q=-1,f;while(u<=o){q=Math.floor((u+o)/2);j=s[q];l.moveToElementText(j);var n=l.compareEndPoints("StartToStart",p);if(n>0){o=q-1}else{if(n<0){u=q+1}else{return{container:t,offset:h(j)}}}}if(q==-1){l.moveToElementText(t);l.setEndPoint("StartToStart",p);f=l.text.replace(/(\r\n|\r)/g,"\n").length;s=t.childNodes;if(!f){j=s[s.length-1];return{container:j,offset:j.nodeValue.length}}var m=s.length;while(f>0){f-=s[--m].nodeValue.length}return{container:s[m],offset:-f}}l.collapse(n>0);l.setEndPoint(n>0?"StartToStart":"EndToStart",p);f=l.text.replace(/(\r\n|\r)/g,"\n").length;if(!f){return dtd.$empty[j.tagName]||dtd.$nonChild[j.tagName]?{container:t,offset:h(j)+(n>0?0:1)}:{container:j,offset:n>0?0:j.childNodes.length}}while(f>0){try{var k=j;j=j[n>0?"previousSibling":"nextSibling"];f-=j.nodeValue.length}catch(r){return{container:t,offset:h(k)}}}return{container:j,offset:n>0?-f:j.nodeValue.length+f}}function c(g,f){if(g.item){f.selectNode(g.item(0))}else{var e=d(g,true);f.setStart(e.container,e.offset);if(g.compareEndPoints("StartToEnd",g)!=0){e=d(g,false);f.setEnd(e.container,e.offset)}}return f}function b(h){var g;try{g=h.getNative().createRange()}catch(i){return null}var f=g.item?g.item(0):g.parentElement();if((f.ownerDocument||f)===h.document){return g}return null}var a=dom.Selection=function(g){var f=this,e;f.document=g;if(browser.ie9below){e=domUtils.getWindow(g).frameElement;domUtils.on(e,"beforedeactivate",function(){f._bakIERange=f.getIERange()});domUtils.on(e,"activate",function(){try{if(!b(f)&&f._bakIERange){f._bakIERange.select()}}catch(h){}f._bakIERange=null})}e=g=null};a.prototype={rangeInBody:function(e,f){var g=browser.ie9below||f?e.item?e.item():e.parentElement():e.startContainer;return g===this.document.body||domUtils.inDoc(g,this.document)},getNative:function(){var g=this.document;try{return !g?null:browser.ie9below?g.selection:domUtils.getWindow(g).getSelection()}catch(f){return null}},getIERange:function(){var e=b(this);if(!e){if(this._bakIERange){return this._bakIERange}}return e},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var e=this.getStart();if(e){return domUtils.findParents(e,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var f=b(this);return !!(f&&this.rangeInBody(f))}else{return !!this.getNative().rangeCount}}catch(g){return false}},getRange:function(){var i=this;function h(e){var o=i.document.body.firstChild,n=e.collapsed;while(o&&o.firstChild){e.setStart(o,0);o=o.firstChild}if(!e.startContainer){e.setStart(i.document.body,0)}if(n){e.collapse(true)}}if(i._cachedRange!=null){return this._cachedRange}var g=new baidu.editor.dom.Range(i.document);if(browser.ie9below){var k=i.getIERange();if(k){try{c(k,g)}catch(l){h(g)}}else{h(g)}}else{var j=i.getNative();if(j&&j.rangeCount){var f=j.getRangeAt(0);var m=j.getRangeAt(j.rangeCount-1);g.setStart(f.startContainer,f.startOffset).setEnd(m.endContainer,m.endOffset);if(g.collapsed&&domUtils.isBody(g.startContainer)&&!g.startOffset){h(g)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}h(g)}}return this._bakRange=g},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var e=browser.ie9below?this.getIERange():this.getRange(),h,i,f,g;if(browser.ie9below){if(!e){return this.document.body.firstChild}if(e.item){return e.item(0)}h=e.duplicate();h.text.length>0&&h.moveStart("character",1);h.collapse(1);i=h.parentElement();g=f=e.parentElement();while(f=f.parentNode){if(f==i){i=g;break}}}else{e.shrinkBoundary();i=e.startContainer;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[Math.min(i.childNodes.length-1,e.startOffset)]}if(i.nodeType==3){return i.parentNode}}return i},getText:function(){var e,f;if(this.isFocus()&&(e=this.getNative())){f=browser.ie9below?e.createRange():e.getRangeAt(0);return browser.ie9below?f.text:f.toString()}return""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var e=0,c;function g(n,m){var h;if(m.textarea){if(utils.isString(m.textarea)){for(var k=0,l,j=domUtils.getElementsByTagName(n,"textarea");l=j[k++];){if(l.id=="ueditor_textarea_"+m.options.textarea){h=l;break}}}else{h=m.textarea}}if(!h){n.appendChild(h=domUtils.createElement(document,"textarea",{name:m.options.textarea,id:"ueditor_textarea_"+m.options.textarea,style:"display:none"}));m.textarea=h}!h.getAttribute("name")&&h.setAttribute("name",m.options.textarea);h.value=m.hasContents()?(m.options.allHtmlEnabled?m.getAllHtml():m.getContent(null,null,true)):""}function d(h){for(var i in UE.plugins){UE.plugins[i].call(h)}}function f(h){for(var i in h){return i}}function b(h){h.langIsReady=true;h.fireEvent("langReady")}var a=UE.Editor=function(h){var i=this;i.uid=e++;EventBase.call(i);i.commands={};i.options=utils.extend(utils.clone(h||{}),UEDITOR_CONFIG,true);i.shortcutkeys={};i.inputRules=[];i.outputRules=[];i.setOpt(a.defaultOptions(i));i.loadServerConfig();if(!utils.isEmptyObject(UE.I18N)){i.options.lang=f(UE.I18N);UE.plugin.load(i);b(i)}else{utils.loadFile(document,{src:i.options.langPath+i.options.lang+"/"+i.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(i);b(i)})}UE.instants["ueditorInstant"+i.uid]=i};a.prototype={registerCommand:function(h,i){this.commands[h]=i},ready:function(h){var i=this;if(h){i.isReady?h.apply(i):i.addListener("ready",h)}},setOpt:function(h,j){var i={};if(utils.isString(h)){i[h]=j}else{i=h}utils.extend(this.options,i,true)},getOpt:function(h){return this.options[h]},destroy:function(){var k=this;k.fireEvent("destroy");var i=k.container.parentNode;var h=k.textarea;if(!h){h=document.createElement("textarea");i.parentNode.insertBefore(h,i)}else{h.style.display=""}h.style.width=k.iframe.offsetWidth+"px";h.style.height=k.iframe.offsetHeight+"px";h.value=k.getContent();h.id=k.key;i.innerHTML="";domUtils.remove(i);var j=k.key;for(var l in k){if(k.hasOwnProperty(l)){delete this[l]}}UE.delEditor(j)},render:function(h){var l=this,i=l.options,k=function(m){return parseInt(domUtils.getComputedStyle(h,m))};if(utils.isString(h)){h=document.getElementById(h)}if(h){if(i.initialFrameWidth){i.minFrameWidth=i.initialFrameWidth}else{i.minFrameWidth=i.initialFrameWidth=h.offsetWidth}if(i.initialFrameHeight){i.minFrameHeight=i.initialFrameHeight}else{i.initialFrameHeight=i.minFrameHeight=h.offsetHeight}h.style.width=/%$/.test(i.initialFrameWidth)?"100%":i.initialFrameWidth-k("padding-left")-k("padding-right")+"px";h.style.height=/%$/.test(i.initialFrameHeight)?"100%":i.initialFrameHeight-k("padding-top")-k("padding-bottom")+"px";h.style.zIndex=i.zIndex;var j=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:0px;font-family:sans-serif;font-size:16px;}p{margin:2px 0;}</style>"+(i.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(i.iframeCssUrl)+"'/>":"")+(i.initialStyle?"<style>"+i.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+l.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script>"+(i.iframeJsUrl?("<script type='text/javascript' src='"+utils.unhtml(i.iframeJsUrl)+"'><\/script>"):"")+"</html>";h.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+l.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(i.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+j+'");document.close();}())'}));h.style.overflow="hidden";setTimeout(function(){if(/%$/.test(i.initialFrameWidth)){i.minFrameWidth=i.initialFrameWidth=h.offsetWidth}if(/%$/.test(i.initialFrameHeight)){i.minFrameHeight=i.initialFrameHeight=h.offsetHeight;h.style.height=i.initialFrameHeight+"px"}})}},_setup:function(m){var k=this,h=k.options;if(ie){m.body.disabled=true;m.body.contentEditable=true;m.body.disabled=false}else{m.body.contentEditable=true}m.body.spellcheck=false;k.document=m;k.window=m.defaultView||m.parentWindow;k.iframe=k.window.frameElement;k.body=m.body;k.selection=new dom.Selection(m);var n;if(browser.gecko&&(n=this.selection.getNative())){n.removeAllRanges()}this._initEvents();for(var j=this.iframe.parentNode;!domUtils.isBody(j);j=j.parentNode){if(j.tagName=="FORM"){k.form=j;if(k.options.autoSyncData){domUtils.on(k.window,"blur",function(){g(j,k)})}else{domUtils.on(j,"submit",function(){g(this,k)})}break}}if(h.initialContent){if(h.autoClearinitialContent){var i=k.execCommand;k.execCommand=function(){k.fireEvent("firstBeforeExecCommand");return i.apply(k,arguments)};this._setDefaultContent(h.initialContent)}else{this.setContent(h.initialContent,false,true)}}if(domUtils.isEmptyNode(k.body)){k.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(h.focus){setTimeout(function(){k.focus(k.options.focusInEnd);!k.options.autoClearinitialContent&&k._selectionChange()},0)}if(!k.container){k.container=this.iframe.parentNode}if(h.fullscreen&&k.ui){k.ui.setFullScreen(true)}try{k.document.execCommand("2D-position",false,false)}catch(l){}try{k.document.execCommand("enableInlineTableEditing",false,false)}catch(l){}try{k.document.execCommand("enableObjectResizing",false,false)}catch(l){}k._bindshortcutKeys();k.isReady=1;k.fireEvent("ready");h.onready&&h.onready.call(k);if(!browser.ie9below){domUtils.on(k.window,["blur","focus"],function(o){if(o.type=="blur"){k._bakRange=k.selection.getRange();try{k._bakNativeRange=k.selection.getNative().getRangeAt(0);k.selection.getNative().removeAllRanges()}catch(o){k._bakNativeRange=null}}else{try{k._bakRange&&k._bakRange.select()}catch(o){}}})}if(browser.gecko&&browser.version<=10902){k.body.contentEditable=false;setTimeout(function(){k.body.contentEditable=true},100);setInterval(function(){k.body.style.height=k.iframe.offsetHeight-20+"px"},100)}!h.isShow&&k.setHide();h.readonly&&k.setDisabled()},sync:function(j){var i=this,h=j?document.getElementById(j):domUtils.findParent(i.iframe.parentNode,function(k){return k.tagName=="FORM"},true);h&&g(h,i)},setHeight:function(h,i){if(h!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=h+"px"}!i&&(this.options.minFrameHeight=this.options.initialFrameHeight=h);this.body.style.height=h+"px";!i&&this.trigger("setHeight")},addshortcutkey:function(i,h){var j={};if(h){j[i]=h}else{j=i}utils.extend(this.shortcutkeys,j)},_bindshortcutKeys:function(){var i=this,h=this.shortcutkeys;i.addListener("keydown",function(o,n){var q=n.keyCode||n.which;for(var l in h){var m=h[l].split(",");for(var r=0,j;j=m[r++];){j=j.split(":");var p=j[0],k=j[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(p.toLowerCase())||/^(\d+)$/.test(p)){if(((RegExp.$1=="ctrl"?(n.ctrlKey||n.metaKey):0)&&(RegExp.$2!=""?n[RegExp.$2.slice(1)+"Key"]:1)&&q==RegExp.$3)||q==RegExp.$1){if(i.queryCommandState(l,k)!=-1){i.execCommand(l,k)}domUtils.preventDefault(n)}}}}})},getContent:function(n,l,i,k,j){var m=this;if(n&&utils.isFunction(n)){l=n;n=""}if(l?!l():!this.hasContents()){return""}m.fireEvent("beforegetcontent");var h=UE.htmlparser(m.body.innerHTML,k);m.filterOutputRule(h);m.fireEvent("aftergetcontent",n,h);return h.toHtml(j)},getAllHtml:function(){var j=this,i=[],h="";j.fireEvent("getAllHtml",i);if(browser.ie&&browser.version>8){var k="";utils.each(j.document.styleSheets,function(l){k+=(l.href?'<link rel="stylesheet" type="text/css" href="'+l.href+'" />':"<style>"+l.cssText+"</style>")});utils.each(j.document.getElementsByTagName("script"),function(l){k+=l.outerHTML})}return"<html><head>"+(j.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+j.options.charset+'"/>':"")+(k||j.document.getElementsByTagName("head")[0].innerHTML)+i.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+j.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var i=new RegExp(domUtils.fillChar,"g"),h=this.body.innerHTML.replace(/[\n\r]/g,"");h=h.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(k,j,l){return dtd.$block[l]?"\n":j?j:""});return h.replace(i,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var h=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(h,"").replace(/\u00a0/g," ")},setContent:function(l,o,k){var q=this;q.fireEvent("beforesetcontent",l);var r=UE.htmlparser(l);q.filterInputRule(r);l=r.toHtml();q.body.innerHTML=(o?q.body.innerHTML:"")+l;function n(p){return p.tagName=="DIV"&&p.getAttribute("cdata_tag")}if(q.options.enterTag=="p"){var i=this.body.firstChild,j;if(!i||i.nodeType==1&&(dtd.$cdata[i.tagName]||n(i)||domUtils.isCustomeNode(i))&&i===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var h=q.document.createElement("p");while(i){while(i&&(i.nodeType==3||i.nodeType==1&&dtd.p[i.tagName]&&!dtd.$cdata[i.tagName])){j=i.nextSibling;h.appendChild(i);i=j}if(h.firstChild){if(!i){q.body.appendChild(h);break}else{i.parentNode.insertBefore(h,i);h=q.document.createElement("p")}}i=i.nextSibling}}}q.fireEvent("aftersetcontent");q.fireEvent("contentchange");!k&&q._selectionChange();q._bakRange=q._bakIERange=q._bakNativeRange=null;var m;if(browser.gecko&&(m=this.selection.getNative())){m.removeAllRanges()}if(q.options.autoSyncData){q.form&&g(q.form,q)}},focus:function(l){try{var j=this,h=j.selection.getRange();if(l){var i=j.body.lastChild;if(i&&i.nodeType==1&&!dtd.$empty[i.tagName]){if(domUtils.isEmptyBlock(i)){h.setStartAtFirst(i)}else{h.setStartAtLast(i)}h.collapse(true)}h.setCursor(true)}else{if(!h.collapsed&&domUtils.isBody(h.startContainer)&&h.startOffset==0){var i=j.body.firstChild;if(i&&i.nodeType==1&&!dtd.$empty[i.tagName]){h.setStartAtFirst(i).collapse(true)}}h.select(true)}this.fireEvent("focus selectionchange")}catch(k){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var h=this.selection.getNative();if(h.empty&&browser.ie){var i=document.body.createTextRange();i.moveToElementText(document.body);i.collapse(true);i.select();h.empty()}else{h.removeAllRanges()}},_initEvents:function(){var h=this,j=h.document,i=h.window;h._proxyDomEvent=utils.bind(h._proxyDomEvent,h);domUtils.on(j,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],h._proxyDomEvent);domUtils.on(i,["focus","blur"],h._proxyDomEvent);domUtils.on(h.body,"drop",function(k){if(browser.gecko&&k.stopPropagation){k.stopPropagation()}h.fireEvent("contentchange")});domUtils.on(j,["mouseup","keydown"],function(k){if(k.type=="keydown"&&(k.ctrlKey||k.metaKey||k.shiftKey||k.altKey)){return}if(k.button==2){return}h._selectionChange(250,k)})},_proxyDomEvent:function(h){if(this.fireEvent("before"+h.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(h.type.replace(/^on/,""),h)===false){return false}return this.fireEvent("after"+h.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(k,h){var n=this;var m=false;var l,j;if(browser.ie&&browser.version<9&&h&&h.type=="mouseup"){var i=this.selection.getRange();if(!i.collapsed){m=true;l=h.clientX;j=h.clientY}}clearTimeout(c);c=setTimeout(function(){if(!n.selection||!n.selection.getNative()){return}var p;if(m&&n.selection.getNative().type=="None"){p=n.document.body.createTextRange();try{p.moveToPoint(l,j)}catch(o){p=null}}var q;if(p){q=n.selection.getIERange;n.selection.getIERange=function(){return p}}n.selection.cache();if(q){n.selection.getIERange=q}if(n.selection._cachedRange&&n.selection._cachedStartElement){n.fireEvent("beforeselectionchange");n.fireEvent("selectionchange",!!h);n.fireEvent("afterselectionchange");n.selection.clear()}},k||50)},_callCmdFn:function(l,i){var h=i[0].toLowerCase(),k,j;k=this.commands[h]||UE.commands[h];j=k&&k[l];if((!k||!j)&&l=="queryCommandState"){return 0}else{if(j){return j.apply(this,i)}}},execCommand:function(i,l){i=i.toLowerCase();var j=this,h,k=j.commands[i]||UE.commands[i];if(!k||!k.execCommand){return null}if(!k.notNeedUndo&&!j.__hasEnterExecCommand){j.__hasEnterExecCommand=true;if(j.queryCommandState.apply(j,arguments)!=-1){j.fireEvent("saveScene");j.fireEvent.apply(j,["beforeexeccommand",i].concat(arguments));h=this._callCmdFn("execCommand",arguments);j.fireEvent.apply(j,["afterexeccommand",i].concat(arguments));j.fireEvent("saveScene")}j.__hasEnterExecCommand=false}else{h=this._callCmdFn("execCommand",arguments);(!j.__hasEnterExecCommand&&!k.ignoreContentChange&&!j._ignoreContentChange)&&j.fireEvent("contentchange")}(!j.__hasEnterExecCommand&&!k.ignoreContentChange&&!j._ignoreContentChange)&&j._selectionChange();return h},queryCommandState:function(h){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(h){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(j){if(j){for(var l=0,k;k=j[l++];){if(this.document.getElementsByTagName(k).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}j=["div"];for(l=0;k=j[l++];){var h=domUtils.getElementsByTagName(this.document,k);for(var o=0,m;m=h[o++];){if(domUtils.isCustomeNode(m)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var i=this,h;if(i.body.contentEditable=="false"){i.body.contentEditable=true;h=i.selection.getRange();try{h.moveToBookmark(i.lastBk);delete i.lastBk}catch(j){h.setStartAtFirst(i.body).collapse(true)}h.select(true);if(i.bkqueryCommandState){i.queryCommandState=i.bkqueryCommandState;delete i.bkqueryCommandState}if(i.bkqueryCommandValue){i.queryCommandValue=i.bkqueryCommandValue;delete i.bkqueryCommandValue}i.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(h){var i=this;h=h?utils.isArray(h)?h:[h]:[];if(i.body.contentEditable=="true"){if(!i.lastBk){i.lastBk=i.selection.getRange().createBookmark(true)}i.body.contentEditable=false;i.bkqueryCommandState=i.queryCommandState;i.bkqueryCommandValue=i.queryCommandValue;i.queryCommandState=function(j){if(utils.indexOf(h,j)!=-1){return i.bkqueryCommandState.apply(i,arguments)}return -1};i.queryCommandValue=function(j){if(utils.indexOf(h,j)!=-1){return i.bkqueryCommandValue.apply(i,arguments)}return null};i.fireEvent("selectionchange")}},disable:function(h){return this.setDisabled(h)},_setDefaultContent:function(){function h(){var i=this;if(i.document.getElementById("initContent")){i.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";i.removeListener("firstBeforeExecCommand focus",h);setTimeout(function(){i.focus();i._selectionChange()},0)}}return function(i){var j=this;j.body.innerHTML='<p id="initContent">'+i+"</p>";j.addListener("firstBeforeExecCommand focus",h)}}(),setShow:function(){var i=this,h=i.selection.getRange();if(i.container.style.display=="none"){try{h.moveToBookmark(i.lastBk);delete i.lastBk}catch(j){h.setStartAtFirst(i.body).collapse(true)}setTimeout(function(){h.select(true)},100);i.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var h=this;if(!h.lastBk){h.lastBk=h.selection.getRange().createBookmark(true)}h.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(k){var l=UE.I18N[this.options.lang];if(!l){throw Error("not import language file")}k=(k||"").split(".");for(var j=0,h;h=k[j++];){l=l[h];if(!l){break}}return l},getContentLength:function(j,h){var m=this.getContent(false,false,true).length;if(j){h=(h||[]).concat(["hr","img","iframe"]);m=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var l=0,k;k=h[l++];){m+=this.document.getElementsByTagName(k).length}}return m},addInputRule:function(h){this.inputRules.push(h)},filterInputRule:function(h){for(var k=0,j;j=this.inputRules[k++];){j.call(this,h)}},addOutputRule:function(h){this.outputRules.push(h)},filterOutputRule:function(h){for(var k=0,j;j=this.outputRules[k++];){j.call(this,h)}},getActionUrl:function(k){var i=this.getOpt(k)||k,j=this.getOpt("imageUrl"),h=this.getOpt("serverUrl");if(!h&&j){h=j.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(h){h=h+(h.indexOf("?")==-1?"?":"&")+"action="+(i||"");return utils.formatUrl(h)}else{return""}}};utils.inherits(a,EventBase)})();(function(){UE.Editor.prototype.loadServerConfig=function(){var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=false;configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config);me.fireEvent("serverConfigLoaded");me._serverConfigLoaded=true}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}});function showErrorMsg(msg){console&&console.error(msg)}};UE.Editor.prototype.isServerConfigLoaded=function(){var me=this;return me._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(handler){if(!handler||!utils.isFunction(handler)){return}var me=this;var readyHandler=function(){handler.apply(me,arguments);me.removeListener("serverConfigLoaded",readyHandler)};if(me.isServerConfigLoaded()){handler.call(me,"serverConfigLoaded")}else{me.addListener("serverConfigLoaded",readyHandler)}}})();var filterWord=UE.filterWord=function(){function c(d){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(d)}function a(d){d=d.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)});return d}function b(d){return d.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(j){if(browser.opera){return""}try{if(/Bitmap/i.test(j)){return""}var g=j.match(/width:([ \d.]*p[tx])/i)[1],f=j.match(/height:([ \d.]*p[tx])/i)[1],i=j.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+a(g)+'" height="'+a(f)+'" src="'+i+'" />'}catch(h){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(h,e,f,g){return e=="class"&&g=="MsoListParagraph"?h:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(f,e,g){return g.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(l,q,j,f){var g=[],p=f.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(i){return utils.transUnitToPx(i)}).split(/;\s*/g);for(var k=0,o;o=p[k];k++){var e,m,h=o.split(":");if(h.length==2){e=h[0].toLowerCase();m=h[1].toLowerCase();if(/^(background)\w*/.test(e)&&m.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(e)&&/^0\w+$/.test(m)){continue}switch(e){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(q)){g[k]=e.replace(/^mso-|-alt$/g,"")+":"+a(m)}continue;case"horiz-align":g[k]="text-align:"+m;continue;case"vert-align":g[k]="vertical-align:"+m;continue;case"font-color":case"mso-foreground":g[k]="color:"+m;continue;case"mso-background":case"mso-highlight":g[k]="background:"+m;continue;case"mso-default-height":g[k]="min-height:"+a(m);continue;case"mso-default-width":g[k]="min-width:"+a(m);continue;case"mso-padding-between-alt":g[k]="border-collapse:separate;border-spacing:"+a(m);continue;case"text-line-through":if((m=="single")||(m=="double")){g[k]="text-decoration:line-through"}continue;case"mso-zero-height":if(m=="yes"){g[k]="display:none"}continue;case"margin":if(!/[1-9]/.test(m)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(e)||/text\-indent|padding|margin/.test(e)&&/\-[\d.]+/.test(m)){continue}g[k]=e+":"+h[1]}}return q+(g.length?' style="'+g.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(d){return(c(d)?b(d):d)}}();(function(){var e=UE.uNode=function(o){this.type=o.type;this.data=o.data;this.tagName=o.tagName;this.parentNode=o.parentNode;this.attrs=o.attrs||{};this.children=o.children};var g={href:1,src:1,_src:1,_href:1,cdata_data:1};var j={style:1,script:1};var k="    ",i="\n";function c(o,q,p){o.push(i);return q+(p?1:-1)}function n(o,q){for(var p=0;p<q;p++){o.push(k)}}e.createElement=function(o){if(/[<>]/.test(o)){return UE.htmlparser(o).children[0]}else{return new e({type:"element",children:[],tagName:o})}};e.createText=function(p,o){return new UE.uNode({type:"text",data:o?p:utils.unhtml(p||"")})};function l(s,o,r,t){switch(s.type){case"root":for(var q=0,p;p=s.children[q++];){if(r&&p.type=="element"&&!dtd.$inlineWithA[p.tagName]&&q>1){c(o,t,true);n(o,t)}l(p,o,r,t)}break;case"text":f(s,o);break;case"element":h(s,o,r,t);break;case"comment":m(s,o,r)}return o}function f(p,o){if(p.parentNode.tagName=="pre"){o.push(p.data)}else{o.push(j[p.parentNode.tagName]?utils.html(p.data):p.data.replace(/[ ]{2}/g," &nbsp;"))}}function h(o,q,u,r){var s="";if(o.attrs){s=[];var v=o.attrs;for(var t in v){s.push(t+(v[t]!==undefined?'="'+(g[t]?utils.html(v[t]).replace(/["]/g,function(x){return"&quot;"}):utils.unhtml(v[t]))+'"':""))}s=s.join(" ")}q.push("<"+o.tagName+(s?" "+s:"")+(dtd.$empty[o.tagName]?"/":"")+">");if(u&&!dtd.$inlineWithA[o.tagName]&&o.tagName!="pre"){if(o.children&&o.children.length){r=c(q,r,true);n(q,r)}}if(o.children&&o.children.length){for(var p=0,w;w=o.children[p++];){if(u&&w.type=="element"&&!dtd.$inlineWithA[w.tagName]&&p>1){c(q,r);n(q,r)}l(w,q,u,r)}}if(!dtd.$empty[o.tagName]){if(u&&!dtd.$inlineWithA[o.tagName]&&o.tagName!="pre"){if(o.children&&o.children.length){r=c(q,r);n(q,r)}}q.push("</"+o.tagName+">")}}function m(p,o){o.push("<!--"+p.data+"-->")}function d(o,s){var r;if(o.type=="element"&&o.getAttr("id")==s){return o}if(o.children&&o.children.length){for(var q=0,p;p=o.children[q++];){if(r=d(p,s)){return r}}}}function b(s,r,o){if(s.type=="element"&&s.tagName==r){o.push(s)}if(s.children&&s.children.length){for(var q=0,p;p=s.children[q++];){b(p,r,o)}}}function a(o,r){if(o.children&&o.children.length){for(var q=0,p;p=o.children[q];){a(p,r);if(p.parentNode){if(p.children&&p.children.length){r(p)}if(p.parentNode){q++}}}}else{r(o)}}e.prototype={toHtml:function(p){var o=[];l(this,o,p,0);return o.join("")},innerHTML:function(p){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(utils.isString(p)){if(this.children){for(var r=0,q;q=this.children[r++];){q.parentNode=null}}this.children=[];var o=UE.htmlparser(p);for(var r=0,q;q=o.children[r++];){this.children.push(q);q.parentNode=this}return this}else{var o=new UE.uNode({type:"root",children:this.children});return o.toHtml()}},innerText:function(o,p){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(o){if(this.children){for(var r=0,q;q=this.children[r++];){q.parentNode=null}}this.children=[];this.appendChild(e.createText(o,p));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element"){return""}return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var q=this.parentNode;for(var p=0,o;o=q.children[p];p++){if(o===this){return p==0?null:q.children[p-1]}}},nextSibling:function(){var q=this.parentNode;for(var p=0,o;o=q.children[p++];){if(o===this){return q.children[p]}}},replaceChild:function(r,q){if(this.children){if(r.parentNode){r.parentNode.removeChild(r)}for(var p=0,o;o=this.children[p];p++){if(o===q){this.children.splice(p,1,r);q.parentNode=null;r.parentNode=this;return r}}}},appendChild:function(q){if(this.type=="root"||(this.type=="element"&&!dtd.$empty[this.tagName])){if(!this.children){this.children=[]}if(q.parentNode){q.parentNode.removeChild(q)}for(var p=0,o;o=this.children[p];p++){if(o===q){this.children.splice(p,1);break}}this.children.push(q);q.parentNode=this;return q}},insertBefore:function(r,q){if(this.children){if(r.parentNode){r.parentNode.removeChild(r)}for(var p=0,o;o=this.children[p];p++){if(o===q){this.children.splice(p,0,r);r.parentNode=this;return r}}}},insertAfter:function(r,q){if(this.children){if(r.parentNode){r.parentNode.removeChild(r)}for(var p=0,o;o=this.children[p];p++){if(o===q){this.children.splice(p+1,0,r);r.parentNode=this;return r}}}},removeChild:function(s,t){if(this.children){for(var r=0,q;q=this.children[r];r++){if(q===s){this.children.splice(r,1);q.parentNode=null;if(t&&q.children&&q.children.length){for(var p=0,o;o=q.children[p];p++){this.children.splice(r+p,0,o);o.parentNode=this}}return q}}}},getAttr:function(o){return this.attrs&&this.attrs[o.toLowerCase()]},setAttr:function(q,p){if(!q){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(utils.isObject(q)){for(var o in q){if(!q[o]){delete this.attrs[o]}else{this.attrs[o.toLowerCase()]=q[o]}}}else{if(!p){delete this.attrs[q]}else{this.attrs[q.toLowerCase()]=p}}},getIndex:function(){var q=this.parentNode;for(var p=0,o;o=q.children[p];p++){if(o===this){return p}}return -1},getNodeById:function(r){var q;if(this.children&&this.children.length){for(var p=0,o;o=this.children[p++];){if(q=d(o,r)){return q}}}},getNodesByTagName:function(p){p=utils.trim(p).replace(/[ ]{2,}/g," ").split(" ");var o=[],q=this;utils.each(p,function(t){if(q.children&&q.children.length){for(var s=0,r;r=q.children[s++];){b(r,t,o)}}});return o},getStyle:function(p){var r=this.getAttr("style");if(!r){return""}var q=new RegExp("(^|;)\\s*"+p+":([^;]+)","i");var o=r.match(q);if(o&&o[0]){return o[2]}return""},setStyle:function(q,r){function p(t,v){var u=new RegExp("(^|;)\\s*"+t+":([^;]+;?)","gi");s=s.replace(u,"$1");if(v){s=t+":"+utils.unhtml(v)+";"+s}}var s=this.getAttr("style");if(!s){s=""}if(utils.isObject(q)){for(var o in q){p(o,q[o])}}else{p(q,r)}this.setAttr("style",utils.trim(s))},traversal:function(o){if(this.children&&this.children.length){a(this,o)}return this}}})();var htmlparser=UE.htmlparser=function(c,q){var k=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,p=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var j={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};c=c.replace(new RegExp(domUtils.fillChar,"g"),"");if(!q){c=c.replace(new RegExp("[\\r\\t\\n"+(q?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(q?"":" ")+"]*","g"),function(u,e){if(e&&j[e.toLowerCase()]){return u.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return u.replace(new RegExp("^[\\r\\n"+(q?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(q?"":" ")+"]+$"),"")})}var s={href:1,src:1};var d=UE.uNode,m={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},n={ol:"li",ul:"li"};function l(u,v){if(n[u.tagName]){var e=d.createElement(n[u.tagName]);u.appendChild(e);e.appendChild(d.createText(v));u=e}else{u.appendChild(d.createText(v))}}function f(y,u,z){var e;if(e=m[u]){var v=y,B;while(v.type!="root"){if(utils.isArray(e)?utils.indexOf(e,v.tagName)!=-1:e==v.tagName){y=v;B=true;break}v=v.parentNode}if(!B){y=f(y,utils.isArray(e)?e[0]:e)}}var x=new d({parentNode:y,type:"element",tagName:u.toLowerCase(),children:dtd.$empty[u]?null:[]});if(z){var A={},w;while(w=p.exec(z)){A[w[1].toLowerCase()]=s[w[1].toLowerCase()]?(w[2]||w[3]||w[4]):utils.unhtml(w[2]||w[3]||w[4])}x.attrs=A}y.children.push(x);return dtd.$empty[u]?y:x}function b(e,u){e.children.push(new d({type:"comment",data:u,parentNode:e}))}var h,a=0,i=0;var o=new d({type:"root",children:[]});var t=o;while(h=k.exec(c)){a=h.index;try{if(a>i){l(t,c.slice(i,a))}if(h[3]){if(dtd.$cdata[t.tagName]){l(t,h[0])}else{t=f(t,h[3].toLowerCase(),h[4])}}else{if(h[1]){if(t.type!="root"){if(dtd.$cdata[t.tagName]&&!dtd.$cdata[h[1]]){l(t,h[0])}else{var g=t;while(t.type=="element"&&t.tagName!=h[1].toLowerCase()){t=t.parentNode;if(t.type=="root"){t=g;throw"break"}}t=t.parentNode}}}else{if(h[2]){b(t,h[2])}}}}catch(r){}i=k.lastIndex}if(i<c.length){l(t,c.slice(i))}return o};var filterNode=UE.filterNode=function(){function a(e,m){switch(e.type){case"text":break;case"element":var c;if(c=m[e.tagName]){if(c==="-"){e.parentNode.removeChild(e)}else{if(utils.isFunction(c)){var h=e.parentNode,j=e.getIndex();c(e);if(e.parentNode){if(e.children){for(var f=0,n;n=e.children[f];){a(n,m);if(n.parentNode){f++}}}}else{for(var f=j,n;n=h.children[f];){a(n,m);if(n.parentNode){f++}}}}else{var l=c["$"];if(l&&e.attrs){var d={},b;for(var k in l){b=e.getAttr(k);if(k=="style"&&utils.isArray(l[k])){var g=[];utils.each(l[k],function(i){var o;if(o=e.getStyle(i)){g.push(i+":"+o)}});b=g.join(";")}if(b){d[k]=b}}e.attrs=d}if(e.children){for(var f=0,n;n=e.children[f];){a(n,m);if(n.parentNode){f++}}}}}}else{if(dtd.$cdata[e.tagName]){e.parentNode.removeChild(e)}else{var h=e.parentNode,j=e.getIndex();e.parentNode.removeChild(e,true);for(var f=j,n;n=h.children[f];){a(n,m);if(n.parentNode){f++}}}}break;case"comment":e.parentNode.removeChild(e)}}return function(b,f){if(utils.isEmptyObject(f)){return b}var e;if(e=f["-"]){utils.each(e.split(" "),function(g){f[g]="-"})}for(var d=0,c;c=b.children[d];){a(c,f);if(c.parentNode){d++}}return b}}();UE.plugin=function(){var a={};return{register:function(e,c,d,b){if(d&&utils.isFunction(d)){b=d;d=null}a[e]={optionName:d||e,execFn:c,afterDisabled:b}},load:function(b){utils.each(a,function(d){var c=d.execFn.call(b);if(b.options[d.optionName]!==false){if(c){utils.each(c,function(f,e){switch(e.toLowerCase()){case"shortcutkey":b.addshortcutkey(f);break;case"bindevents":utils.each(f,function(h,g){b.addListener(g,h)});break;case"bindmultievents":utils.each(utils.isArray(f)?f:[f],function(h){var g=utils.trim(h.type).split(/\s+/);utils.each(g,function(i){b.addListener(i,h.handler)})});break;case"commands":utils.each(f,function(h,g){b.commands[g]=h});break;case"outputrule":b.addOutputRule(f);break;case"inputrule":b.addInputRule(f);break;case"defaultoptions":b.setOpt(f)}})}}else{if(d.afterDisabled){d.afterDisabled.call(b)}}});utils.each(UE.plugins,function(c){c.call(b)})},run:function(d,b){var c=a[d];if(c){c.exeFn.call(b)}}}}();